{"version":3,"sources":["main.js"],"names":["_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","e","n","document","addEventListener","isMobile","window","innerWidth","triggers","querySelectorAll","closeAllModals","exceptModal","arguments","undefined","forEach","modal","classList","remove","querySelector","body","openModal","add","closeModal","trigger","modalId","dataset","getElementById","closeBtn","preventDefault","stopPropagation","contains","openModalEl","content","target","closest","section","inner","btnNext","btnPrev","itemNumEl","locked","wheelCooldown","wheelAccum","snappedOnce","nearlyVisible","getActiveIndex","cls","className","match","parseInt","Math","min","max","setActiveIndex","index","next","i","concat","textContent","String","padStart","disabled","step","dir","touchStartX","touchStartY","touches","clientX","clientY","passive","changedTouches","dx","dy","abs","IntersectionObserver","entries","isIntersecting","intersectionRatio","threshold","observe","rect","deltaY","getBoundingClientRect","top","targetY","scrollY","scrollTo","behavior","snapToTop","DESKTOP_STOP_OFFSET","bottom","inLockZone","idx","setTimeout","list","getItems","initialOrder","btn","li","desc","toggle","nowOpen","openDesc","closeDesc","img","activeItem","itemsBefore","activeIndex","indexOf","wasActive","flipAnimate","resetDesktopClasses","el","appendChild","prepend","item","ev","propertyName","style","maxHeight","lastMode","init","root","viewport","track","logoList","clone","cloneNode","setAttribute","measure","distance","width","setProperty","imgs","Promise","all","map","complete","resolve","res","once","then","ro","ResizeObserver","clearTimeout","_t","tabs","buttons","panels","interval","order","tab","currentIndex","findIndex","timer","activateByName","panel","tabTarget","split","filter","startsWith","join","setBackgroundClass","nextIndex","start","stop","setInterval","clearInterval","hidden","ctaSection","ctaBg","MAX_OFFSET_PX","isTicking","applySettings","updateParallax","vh","innerHeight","progress","height","translateY","transform","requestUpdate","requestAnimationFrame","accordion","parentElement","nextElementSibling","isOpen","other","otherPanel","close","scrollHeight","onEnd","removeEventListener","open","p","block","wordsLimit","words","fullText","trim","shortText","createElement","insertBefore","type","setBtn","annotationRoot","annotationLimit","annotationFullHTML","innerHTML","annotationWords","replace","annotationShortText","annotationInner","annotationToggle","annotationIsOpen","annotationSetButton","annotationSetMaxHeight","hoViewport","hoTrack","hoX","hoDir","hoRafId","hoMode","hoTargetX","hoEaseRafId","hoMaxScroll","vw","clientWidth","tw","scrollWidth","hoClamp","val","hoSetX","hoStopAuto","cancelAnimationFrame","hoPointerX","hoPointerY","hoOnWheel","elementFromPoint","hoIsPointerOverViewport","delta","diff","hoStartEase","hoApplyMode","nextMode","hoTick","hoStartAuto","container","mutate","duration","els","children","first","Map","last","f","get","l","left","transition","mode","display","removeProperty","resetDesktop"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n\r\n    /*Mobile settings*/\r\n    const MOBILE_BREAKPOINT = 1023;\r\n    const isMobile = () => window.innerWidth <= MOBILE_BREAKPOINT;\r\n\r\n    /*Implementation modal*/\r\n\r\n    const triggers = document.querySelectorAll('.modal-trigger');\r\n\r\n    const closeAllModals = (exceptModal = null) => {\r\n        document.querySelectorAll('.modal.is-open').forEach(modal => {\r\n            if (exceptModal && modal === exceptModal) return;\r\n            modal.classList.remove('is-open');\r\n        });\r\n\r\n        if (!document.querySelector('.modal.is-open')) {\r\n            document.body.classList.remove('modal-open');\r\n        }\r\n    };\r\n\r\n    const openModal = (modal) => {\r\n        modal.classList.add('is-open');\r\n        document.body.classList.add('modal-open');\r\n    };\r\n\r\n    const closeModal = (modal) => {\r\n        modal.classList.remove('is-open');\r\n\r\n        if (!document.querySelector('.modal.is-open')) {\r\n            document.body.classList.remove('modal-open');\r\n        }\r\n    };\r\n\r\n    triggers.forEach(trigger => {\r\n        const modalId = trigger.dataset.modal;\r\n        const modal = document.getElementById(modalId);\r\n        if (!modal) return;\r\n\r\n        const closeBtn = modal.querySelector('.modal-close');\r\n\r\n        trigger.addEventListener('click', (e) => {\r\n            if (!isMobile()) return;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            if (modal.classList.contains('is-open')) {\r\n                closeModal(modal);\r\n                return;\r\n            }\r\n\r\n            closeAllModals(modal);\r\n            openModal(modal);\r\n        });\r\n\r\n        trigger.addEventListener('mouseenter', () => {\r\n            if (isMobile()) return;\r\n            openModal(modal);\r\n        });\r\n\r\n        trigger.addEventListener('mouseleave', () => {\r\n            if (isMobile()) return;\r\n            closeModal(modal);\r\n        });\r\n\r\n        modal.addEventListener('mouseenter', () => {\r\n            if (isMobile()) return;\r\n            openModal(modal);\r\n        });\r\n\r\n        modal.addEventListener('mouseleave', () => {\r\n            if (isMobile()) return;\r\n            closeModal(modal);\r\n        });\r\n\r\n        closeBtn?.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            closeModal(modal);\r\n        });\r\n    });\r\n\r\n    document.addEventListener('click', (e) => {\r\n        if (!isMobile()) return;\r\n\r\n        const openModalEl = document.querySelector('.modal.is-open');\r\n        if (!openModalEl) return;\r\n\r\n        const content = openModalEl.querySelector('.modal-inner');\r\n        if (!content) return;\r\n\r\n        if (\r\n            !content.contains(e.target) &&\r\n            !e.target.closest('.modal-trigger')\r\n        ) {\r\n            closeAllModals();\r\n        }\r\n    });\r\n\r\n    window.addEventListener('resize', closeAllModals);\r\n\r\n    /*Implementation slider*/\r\n    const section = document.querySelector('.implementation');\r\n    if (!section) return;\r\n\r\n    const inner = section.querySelector('.implementation__inner');\r\n    if (!inner) return;\r\n\r\n    const btnNext = section.querySelector('.implementation__nav-btn.next');\r\n    const btnPrev = section.querySelector('.implementation__nav-btn.prev');\r\n    const itemNumEl = section.querySelector('.implementation__item-num span');\r\n\r\n    const MAX_ITEMS = 4;\r\n\r\n    // --- tuning\r\n    const DESKTOP_STOP_OFFSET = 0;   // —è–∫—â–æ —Ç—Ä–µ–±–∞ –ø—ñ–¥ —Ö–µ–¥–µ—Ä ‚Äî —Å—Ç–∞–≤ 140 —ñ –¥–æ–¥–∞–π offset —É snap (–¥–∏–≤. –Ω–∏–∂—á–µ)\r\n    const NEARLY_VISIBLE_RATIO = 0.92; // –º–∞–π–∂–µ 100% (—â–æ–± —Ç–∞—á–ø–∞–¥ –Ω–µ \"–ø—Ä–æ–ª—ñ—Ç–∞–≤\")\r\n    const TOP_SNAP_MIN = -20;          // px\r\n    const TOP_SNAP_MAX = 160;          // px (—á–∏–º –±—ñ–ª—å—à–µ ‚Äî —Ç–∏–º —Ä–∞–Ω—ñ—à–µ —Ñ—ñ–∫—Å—É—î—Ç—å—Å—è)\r\n    const WHEEL_THRESHOLD = 70;\r\n    const COOLDOWN_MS = 240;\r\n\r\n    // --- state\r\n    let locked = false;\r\n    let wheelCooldown = false;\r\n    let wheelAccum = 0;\r\n    let snappedOnce = false; // —â–æ–± –Ω–µ \"–ª–∏–ø–ª–æ\" –ø–æ—Å—Ç—ñ–π–Ω–æ\r\n    let nearlyVisible = false;\r\n\r\n    // ---------- helpers\r\n    const getActiveIndex = () => {\r\n        const cls = inner.className.match(/item-(\\d+)-active/);\r\n        const n = cls ? parseInt(cls[1], 10) : 1;\r\n        return Math.min(Math.max(n, 1), MAX_ITEMS);\r\n    };\r\n\r\n    const setActiveIndex = (index) => {\r\n        const next = Math.min(Math.max(index, 1), MAX_ITEMS);\r\n\r\n        for (let i = 1; i <= MAX_ITEMS; i++) inner.classList.remove(`item-${i}-active`);\r\n        inner.classList.add(`item-${next}-active`);\r\n\r\n        if (itemNumEl) itemNumEl.textContent = String(next).padStart(2, '0');\r\n\r\n        if (btnPrev) btnPrev.disabled = next === 1;\r\n        if (btnNext) btnNext.disabled = next === MAX_ITEMS;\r\n    };\r\n\r\n    const step = (dir) => setActiveIndex(getActiveIndex() + dir);\r\n\r\n    // ---------- buttons\r\n    btnNext?.addEventListener('click', (e) => { e.preventDefault(); step(+1); });\r\n    btnPrev?.addEventListener('click', (e) => { e.preventDefault(); step(-1); });\r\n\r\n    // ---------- mobile swipe\r\n    let touchStartX = 0;\r\n    let touchStartY = 0;\r\n    const SWIPE_MIN_DIST = 40;\r\n    const SWIPE_MAX_ANGLE = 0.6;\r\n\r\n    section.addEventListener('touchstart', (e) => {\r\n        if (!isMobile()) return;\r\n        const t = e.touches[0];\r\n        touchStartX = t.clientX;\r\n        touchStartY = t.clientY;\r\n    }, { passive: true });\r\n\r\n    section.addEventListener('touchend', (e) => {\r\n        if (!isMobile()) return;\r\n\r\n        const t = e.changedTouches[0];\r\n        const dx = t.clientX - touchStartX;\r\n        const dy = t.clientY - touchStartY;\r\n\r\n        if (Math.abs(dx) < SWIPE_MIN_DIST) return;\r\n        if (Math.abs(dy) > Math.abs(dx) * SWIPE_MAX_ANGLE) return;\r\n\r\n        if (dx < 0) step(+1);\r\n        else step(-1);\r\n    }, { passive: true });\r\n\r\n    // ---------- desktop: track \"nearly visible\"\r\n    const io = new IntersectionObserver((entries) => {\r\n        const e = entries[0];\r\n        nearlyVisible = e.isIntersecting && e.intersectionRatio >= NEARLY_VISIBLE_RATIO;\r\n\r\n        // —è–∫—â–æ –≤–∏–π—à–ª–∏ –∑ —Å–µ–∫—Ü—ñ—ó ‚Äî —Å–∫–∏–¥–∞—î–º–æ, —â–æ–± –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–∞–∑—É –∑–Ω–æ–≤ –º–æ–∂–Ω–∞ –±—É–ª–æ snap\r\n        if (!e.isIntersecting || e.intersectionRatio < 0.3) {\r\n            snappedOnce = false;\r\n            locked = false;\r\n            wheelAccum = 0;\r\n        }\r\n    }, { threshold: [0, 0.3, NEARLY_VISIBLE_RATIO, 1] });\r\n\r\n    io.observe(section);\r\n\r\n    // ---------- snap (–æ–¥–∏–Ω —Ä–∞–∑)\r\n    const snapToTop = () => {\r\n        const rect = section.getBoundingClientRect();\r\n        const targetY = window.scrollY + rect.top - DESKTOP_STOP_OFFSET;\r\n        window.scrollTo({ top: targetY, behavior: 'auto' });\r\n    };\r\n\r\n    // —Å–µ–∫—Ü—ñ—è ‚Äú—Å—Ç–æ—ó—Ç—å‚Äù —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –µ–∫—Ä–∞–Ω—É (–≥–æ—Ç–æ–≤–∞ –¥–æ lock)\r\n    const isInTopBand = () => {\r\n        const rect = section.getBoundingClientRect();\r\n        return rect.top >= TOP_SNAP_MIN && rect.top <= TOP_SNAP_MAX;\r\n    };\r\n\r\n    // lock –∑–æ–Ω–∞ (–∫–æ–ª–∏ –≤–∂–µ –ø—ñ–¥—Ö–æ–ø–∏–ª–∏)\r\n    const inLockZone = () => {\r\n        const rect = section.getBoundingClientRect();\r\n        // —è–∫—â–æ DESKTOP_STOP_OFFSET=0 ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ top<=0\r\n        return rect.top <= DESKTOP_STOP_OFFSET + 2 && rect.bottom > (DESKTOP_STOP_OFFSET + 120);\r\n    };\r\n\r\n    const onWheel = (e) => {\r\n        if (isMobile()) return;\r\n\r\n        const dy = e.deltaY;\r\n\r\n        // --- –í–•–Ü–î: —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ —Å–µ–∫—Ü—ñ—è –º–∞–π–∂–µ 100% –≤–∏–¥–∏–º–∞ —ñ –±–ª–∏–∑—å–∫–æ –¥–æ –≤–µ—Ä—Ö—É\r\n        if (!locked) {\r\n            if (!nearlyVisible) return;\r\n            if (!isInTopBand()) return;\r\n\r\n            // —Ä–æ–±–∏–º–æ snap –æ–¥–∏–Ω —Ä–∞–∑, —â–æ–± –≤–∏—Ä—ñ–≤–Ω—è—Ç–∏\r\n            if (!snappedOnce) {\r\n                e.preventDefault();\r\n                snappedOnce = true;\r\n                snapToTop();\r\n                locked = true;\r\n                wheelAccum = 0;\r\n                return;\r\n            }\r\n\r\n            locked = true;\r\n        }\r\n\r\n        // —è–∫—â–æ –∑ —è–∫–∏—Ö–æ—Å—å –ø—Ä–∏—á–∏–Ω –º–∏ –≤–∂–µ –Ω–µ –≤ lock –∑–æ–Ω—ñ ‚Äî –≤—ñ–¥–ø—É—Å–∫–∞—î–º–æ\r\n        if (!inLockZone()) {\r\n            locked = false;\r\n            return;\r\n        }\r\n\r\n        const idx = getActiveIndex();\r\n\r\n        // --- –í–ò–•–Ü–î: –Ω–∞ –∫—Ä–∞—è—Ö –≤—ñ–¥–ø—É—Å–∫–∞—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É\r\n        if ((idx === 1 && dy < 0) || (idx === MAX_ITEMS && dy > 0)) {\r\n            locked = false;\r\n            wheelAccum = 0;\r\n            return; // –±–µ–∑ preventDefault\r\n        }\r\n\r\n        // --- –õ–ò–°–¢–ê–ù–ù–Ø\r\n        e.preventDefault();\r\n        wheelAccum += dy;\r\n\r\n        if (wheelCooldown) return;\r\n\r\n        if (wheelAccum >= WHEEL_THRESHOLD) {\r\n            wheelAccum = 0;\r\n            wheelCooldown = true;\r\n            step(+1);\r\n            setTimeout(() => (wheelCooldown = false), COOLDOWN_MS);\r\n        } else if (wheelAccum <= -WHEEL_THRESHOLD) {\r\n            wheelAccum = 0;\r\n            wheelCooldown = true;\r\n            step(-1);\r\n            setTimeout(() => (wheelCooldown = false), COOLDOWN_MS);\r\n        }\r\n    };\r\n\r\n    window.addEventListener('wheel', onWheel, { passive: false });\r\n\r\n    // init\r\n    setActiveIndex(getActiveIndex());\r\n\r\n    window.addEventListener('resize', () => {\r\n        locked = false;\r\n        snappedOnce = false;\r\n        wheelAccum = 0;\r\n        wheelCooldown = false;\r\n    });\r\n\r\n\r\n/*Show more / less*/\r\n    const list = document.querySelector('.about__list');\r\n    if (!list) return;\r\n\r\n// ‚úÖ –∞–∫—Ç—É–∞–ª—å–Ω—ñ items\r\n    const getItems = () => [...list.querySelectorAll('.about__list-item')];\r\n\r\n// ‚úÖ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π DOM-–ø–æ—Ä—è–¥–æ–∫, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –≤—ñ–¥–∫–æ—Ç–∏—Ç–∏—Å—å\r\n    const initialOrder = getItems();\r\n\r\n// ===== Mobile helpers =====\r\n    function closeDesc(desc) {\r\n        desc.classList.add('is-collapsed');\r\n        desc.style.maxHeight = '0px';\r\n    }\r\n\r\n    function openDesc(desc) {\r\n        desc.classList.remove('is-collapsed');\r\n        desc.style.maxHeight = desc.scrollHeight + 'px';\r\n    }\r\n\r\n    function resetDesktop(desc) {\r\n        desc.classList.remove('is-collapsed');\r\n        desc.style.removeProperty('max-height');\r\n    }\r\n\r\n// ===== Reset states =====\r\n    function resetDesktopClasses() {\r\n        list.classList.remove('is-expanded');\r\n        getItems().forEach(li => li.classList.remove('is-active', 'is-left', 'is-right'));\r\n    }\r\n\r\n    function applyMobileState() {\r\n        resetDesktopClasses();\r\n\r\n        getItems().forEach(li => {\r\n            const desc = li.querySelector('.about__list-item--description');\r\n            const btn  = li.querySelector('.about__list-item--btn');\r\n            if (!desc || !btn) return;\r\n\r\n            btn.style.display = 'inline-block';\r\n\r\n            const isOpen = btn.classList.contains('is-open');\r\n            isOpen ? openDesc(desc) : closeDesc(desc);\r\n\r\n            btn.textContent = isOpen ? 'Read less' : 'Read more';\r\n        });\r\n    }\r\n\r\n    function applyDesktopState() {\r\n        getItems().forEach(li => {\r\n            const desc = li.querySelector('.about__list-item--description');\r\n            const btn  = li.querySelector('.about__list-item--btn');\r\n\r\n            if (desc) resetDesktop(desc);\r\n\r\n            if (btn) {\r\n                btn.style.display = 'none';\r\n                btn.classList.remove('is-open');\r\n                btn.textContent = '';\r\n            }\r\n        });\r\n\r\n        resetDesktopClasses();\r\n\r\n        // ‚úÖ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø\r\n        initialOrder.forEach(el => list.appendChild(el));\r\n    }\r\n\r\n// ===== FLIP =====\r\n    function flipAnimate(container, mutate, duration = 520) {\r\n        const els = Array.from(container.children);\r\n\r\n        const first = new Map(els.map(el => [el, el.getBoundingClientRect()]));\r\n\r\n        mutate();\r\n\r\n        container.getBoundingClientRect(); // force layout\r\n\r\n        const last = new Map(els.map(el => [el, el.getBoundingClientRect()]));\r\n\r\n        els.forEach(el => {\r\n            const f = first.get(el);\r\n            const l = last.get(el);\r\n            if (!f || !l) return;\r\n\r\n            const dx = f.left - l.left;\r\n            const dy = f.top - l.top;\r\n\r\n            if (dx || dy) {\r\n                el.style.transform = `translate(${dx}px, ${dy}px)`;\r\n                el.style.transition = 'transform 0s';\r\n            }\r\n        });\r\n\r\n        requestAnimationFrame(() => {\r\n            els.forEach(el => {\r\n                if (el.style.transform) {\r\n                    el.style.transition = `transform ${duration}ms ease`;\r\n                    el.style.transform = '';\r\n                }\r\n            });\r\n        });\r\n\r\n        setTimeout(() => {\r\n            els.forEach(el => {\r\n                el.style.transition = '';\r\n                el.style.transform = '';\r\n            });\r\n        }, duration + 60);\r\n\r\n        return duration;\r\n    }\r\n\r\n// ===== Desktop click =====\r\n    list.addEventListener('click', (e) => {\r\n        // ===== MOBILE =====\r\n        if (isMobile()) {\r\n            const btn = e.target.closest('.about__list-item--btn');\r\n            if (!btn) return;\r\n\r\n            const li = btn.closest('.about__list-item');\r\n            if (!li) return;\r\n\r\n            const desc = li.querySelector('.about__list-item--description');\r\n            if (!desc) return;\r\n\r\n            btn.classList.toggle('is-open');\r\n            const nowOpen = btn.classList.contains('is-open');\r\n\r\n            nowOpen ? openDesc(desc) : closeDesc(desc);\r\n            btn.textContent = nowOpen ? 'Read less' : 'Read more';\r\n            return;\r\n        }\r\n\r\n        // ===== DESKTOP =====\r\n        const img = e.target.closest('.about__list-item--img');\r\n        if (!img) return;\r\n\r\n        const activeItem = img.closest('.about__list-item');\r\n        if (!activeItem) return;\r\n\r\n        const itemsBefore = getItems();                 // DOM –ø–æ—Ä—è–¥–æ–∫ –î–û –∑–º—ñ–Ω\r\n        const activeIndex = itemsBefore.indexOf(activeItem);\r\n        const wasActive = activeItem.classList.contains('is-active');\r\n\r\n        // toggle OFF: –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ—Ä—è–¥–æ–∫ + –∑–Ω—ñ–º–∞—î–º–æ –∫–ª–∞—Å–∏ (–ø–ª–∞–≤–Ω–æ —á–µ—Ä–µ–∑ FLIP)\r\n        if (wasActive) {\r\n            flipAnimate(list, () => {\r\n                resetDesktopClasses();\r\n                initialOrder.forEach(el => list.appendChild(el));\r\n            }, 520);\r\n            return;\r\n        }\r\n\r\n        // toggle ON: –∞–∫—Ç–∏–≤–Ω–∏–π —Å—Ç–∞—î –ø–µ—Ä—à–∏–º, —ñ–Ω—à—ñ —Ä–æ–∑'—ó–∂–¥–∂–∞—é—Ç—å—Å—è\r\n        flipAnimate(list, () => {\r\n            // reset\r\n            resetDesktopClasses();\r\n\r\n            // 1) –∞–∫—Ç–∏–≤–Ω–∏–π –Ω–∞ –ø–µ—Ä—à–µ –º—ñ—Å—Ü–µ\r\n            list.prepend(activeItem);\r\n\r\n            // 2) –∞–∫—Ç–∏–≤–Ω–∏–π –∫–ª–∞—Å\r\n            activeItem.classList.add('is-active');\r\n\r\n            // 3) —Ö—Ç–æ –±—É–≤ –î–û –∞–∫—Ç–∏–≤–Ω–æ–≥–æ -> –≤–ª—ñ–≤–æ, —Ö—Ç–æ –ü–Ü–°–õ–Ø -> –≤–ø—Ä–∞–≤–æ\r\n            itemsBefore.forEach((item, i) => {\r\n                if (item === activeItem) return;\r\n                if (i < activeIndex) item.classList.add('is-left');\r\n                else item.classList.add('is-right');\r\n            });\r\n\r\n            // 4) –≤–º–∏–∫–∞—î–º–æ —Ä–æ–∑'—ó–∑–¥ (CSS —Ä–æ–±–∏—Ç—å translateX –¥–ª—è left/right)\r\n            list.classList.add('is-expanded');\r\n        }, 520);\r\n    });\r\n\r\n// ===== transitionend —Ç—ñ–ª—å–∫–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å—É =====\r\n    getItems().forEach(li => {\r\n        const desc = li.querySelector('.about__list-item--description');\r\n        if (!desc) return;\r\n\r\n        desc.addEventListener('transitionend', (ev) => {\r\n            if (ev.propertyName !== 'max-height') return;\r\n            if (!isMobile()) return;\r\n\r\n            if (!desc.classList.contains('is-collapsed')) {\r\n                desc.style.maxHeight = 'none';\r\n            }\r\n        });\r\n    });\r\n\r\n// ===== Init + resize =====\r\n    let lastMode = isMobile() ? 'mobile' : 'desktop';\r\n\r\n    function init() {\r\n        const mode = isMobile() ? 'mobile' : 'desktop';\r\n        mode === 'mobile' ? applyMobileState() : applyDesktopState();\r\n        lastMode = mode;\r\n    }\r\n\r\n    init();\r\n\r\n    window.addEventListener('resize', () => {\r\n        const mode = isMobile() ? 'mobile' : 'desktop';\r\n        if (mode === lastMode) return;\r\n        init();\r\n    });\r\n\r\n\r\n    /*Logo line*/\r\n    const root = document.querySelector('.logo-line');\r\n    if (!root) return;\r\n\r\n    const viewport = root.querySelector('.logo-line__viewport');\r\n    const track = root.querySelector('.logo-line__track');\r\n    const logoList = root.querySelector('.logo-line__list');\r\n    if (!viewport || !track || !logoList) return;\r\n\r\n    const SPEED = 80; // px/sec\r\n    let clone = track.querySelector('.logo-line__list[data-clone=\"1\"]');\r\n\r\n    // —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–ª–æ–Ω –æ–¥–∏–Ω —Ä–∞–∑\r\n    if (!clone) {\r\n        clone = logoList.cloneNode(true);\r\n        clone.setAttribute('data-clone', '1');\r\n        track.appendChild(clone);\r\n    }\r\n\r\n    const measure = () => {\r\n        const distance = logoList.getBoundingClientRect().width;\r\n        if (!distance) return;\r\n\r\n        root.style.setProperty('--marquee-distance', `${distance}px`);\r\n        root.style.setProperty('--marquee-duration', `${distance / SPEED}s`);\r\n    };\r\n\r\n    // —á–µ–∫–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ª–æ–≥–æ—Ç–∏–ø—ñ–≤\r\n    const imgs = [...root.querySelectorAll('img')];\r\n    const waitImages = Promise.all(\r\n        imgs.map(img =>\r\n            img.complete\r\n                ? Promise.resolve()\r\n                : new Promise(res => {\r\n                    img.addEventListener('load', res, { once: true });\r\n                    img.addEventListener('error', res, { once: true });\r\n                })\r\n        )\r\n    );\r\n\r\n    waitImages.then(measure);\r\n\r\n    // —è–∫—â–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —à–∏—Ä–∏–Ω–∞ (resize / responsive)\r\n    const ro = new ResizeObserver(() => {\r\n        clearTimeout(measure._t);\r\n        measure._t = setTimeout(measure, 120);\r\n    });\r\n\r\n    ro.observe(viewport);\r\n    ro.observe(logoList);\r\n\r\n    window.addEventListener('resize', () => {\r\n        clearTimeout(measure._t);\r\n        measure._t = setTimeout(measure, 150);\r\n    });\r\n\r\n/*Tabs*/\r\n    document.querySelectorAll('.tabs').forEach(tabs => {\r\n        const section = tabs.closest('.how-it-works'); // üëà —Å–µ–∫—Ü—ñ—è –∑ —Ñ–æ–Ω–æ–º\r\n        const buttons = [...tabs.querySelectorAll('[data-tab]')];\r\n        const panels  = [...tabs.querySelectorAll('[data-tab-target]')];\r\n\r\n        if (!buttons.length || !panels.length) return;\r\n\r\n        const interval = parseInt(tabs.dataset.interval, 10) || 4000;\r\n\r\n        const order = buttons.map(btn => btn.dataset.tab);\r\n\r\n        let currentIndex = Math.max(\r\n            0,\r\n            buttons.findIndex(btn => btn.classList.contains('is-active'))\r\n        );\r\n        if (currentIndex === -1) currentIndex = 0;\r\n\r\n        let timer = null;\r\n\r\n        const setBackgroundClass = (name) => {\r\n            if (!section) return;\r\n\r\n            // –ø—Ä–∏–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ how-it-works--*\r\n            section.className = section.className\r\n                .split(' ')\r\n                .filter(cls => !cls.startsWith('how-it-works--'))\r\n                .join(' ');\r\n\r\n            // –¥–æ–¥–∞—î–º–æ –Ω–æ–≤–∏–π\r\n            section.classList.add(`how-it-works--${name}`);\r\n        };\r\n\r\n        const activateByName = (name) => {\r\n            buttons.forEach(btn =>\r\n                btn.classList.toggle('is-active', btn.dataset.tab === name)\r\n            );\r\n\r\n            panels.forEach(panel =>\r\n                panel.classList.toggle(\r\n                    'is-active',\r\n                    panel.dataset.tabTarget === name\r\n                )\r\n            );\r\n\r\n            setBackgroundClass(name);\r\n            currentIndex = order.indexOf(name);\r\n        };\r\n\r\n        const next = () => {\r\n            const nextIndex = (currentIndex + 1) % order.length;\r\n            activateByName(order[nextIndex]);\r\n        };\r\n\r\n        const start = () => {\r\n            stop();\r\n            timer = setInterval(next, interval);\r\n        };\r\n\r\n        const stop = () => {\r\n            if (timer) {\r\n                clearInterval(timer);\r\n                timer = null;\r\n            }\r\n        };\r\n\r\n        // –∫–ª—ñ–∫–∏ –ø–æ —Ç–∞–±–∞—Ö\r\n        buttons.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                activateByName(btn.dataset.tab);\r\n                start(); // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ü–∏–∫–ª—É\r\n            });\r\n        });\r\n\r\n        // init\r\n        activateByName(order[currentIndex]);\r\n        start();\r\n\r\n        // –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: –Ω–µ –∫—Ä—É—Ç–∏—Ç–∏ —É –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ–π –≤–∫–ª–∞–¥—Ü—ñ –±—Ä–∞—É–∑–µ—Ä–∞\r\n        document.addEventListener('visibilitychange', () => {\r\n            document.hidden ? stop() : start();\r\n        });\r\n    });\r\n\r\n/*Parallax for CTA*/\r\n    const ctaSection = document.querySelector('.cta');\r\n    if (!ctaSection) return;\r\n\r\n    const ctaBg = ctaSection.querySelector('.cta__bg');\r\n    if (!ctaBg) return;\r\n\r\n    const DESKTOP_BREAKPOINT = 1024;\r\n\r\n    let MAX_OFFSET_PX = 120; // desktop default\r\n    let isTicking = false;\r\n    let isInView = true;\r\n\r\n    const applySettings = () => {\r\n        if (window.innerWidth >= DESKTOP_BREAKPOINT) {\r\n            // üñ• DESKTOP\r\n            MAX_OFFSET_PX = 280;   // –º–æ–∂–µ—à –∑–±—ñ–ª—å—à–∏—Ç–∏ –¥–æ 160\r\n        } else {\r\n            // üì± MOBILE\r\n            MAX_OFFSET_PX = 150;    // –∞–±–æ 0, —è–∫—â–æ –Ω–µ —Ö–æ—á–µ—à –ø–∞—Ä–∞–ª–∞–∫—Å –Ω–∞ –º–æ–±—ñ–ª—Ü—ñ\r\n        }\r\n    };\r\n\r\n    applySettings();\r\n\r\n    const updateParallax = () => {\r\n        const rect = ctaSection.getBoundingClientRect();\r\n        const vh = window.innerHeight;\r\n\r\n        isInView = rect.bottom > 0 && rect.top < vh;\r\n        if (!isInView) {\r\n            isTicking = false;\r\n            return;\r\n        }\r\n\r\n        const progress = (vh - rect.top) / (vh + rect.height);\r\n        const clamped = Math.min(Math.max(progress, 0), 1);\r\n\r\n        const translateY = (clamped - 0.5) * MAX_OFFSET_PX * 2;\r\n\r\n        ctaBg.style.transform = `translate3d(0, ${translateY}px, 0)`;\r\n\r\n        isTicking = false;\r\n    };\r\n\r\n    const requestUpdate = () => {\r\n        if (isTicking) return;\r\n        isTicking = true;\r\n        requestAnimationFrame(updateParallax);\r\n    };\r\n\r\n    window.addEventListener('scroll', requestUpdate, { passive: true });\r\n    window.addEventListener('resize', () => {\r\n        applySettings();\r\n        requestUpdate();\r\n    });\r\n\r\n    // —Å—Ç–∞—Ä—Ç\r\n    requestUpdate();\r\n\r\n/* Accordion */\r\n    const accordion = document.querySelector('.accordion');\r\n\r\n    function open(panel, item){\r\n        item.classList.add('is-open');\r\n        panel.style.height = panel.getBoundingClientRect().height + 'px';\r\n        requestAnimationFrame(() => {\r\n            panel.style.height = panel.scrollHeight + 'px';\r\n        });\r\n        const onEnd = (e) => {\r\n            if (e.propertyName !== 'height') return;\r\n            panel.removeEventListener('transitionend', onEnd);\r\n            panel.style.height = 'auto';\r\n        };\r\n        panel.addEventListener('transitionend', onEnd);\r\n    }\r\n\r\n    function close(panel, item){\r\n        item.classList.remove('is-open');\r\n        panel.style.height = panel.scrollHeight + 'px';\r\n        requestAnimationFrame(() => {\r\n            panel.style.height = '0px';\r\n        });\r\n    }\r\n\r\n    accordion.addEventListener('click', (e) => {\r\n        const btn = e.target.closest('.acc-trigger');\r\n        if (!btn) return;\r\n\r\n        const item = btn.parentElement;\r\n        const panel = btn.nextElementSibling;\r\n        const isOpen = item.classList.contains('is-open');\r\n\r\n        accordion.querySelectorAll('.acc-item.is-open').forEach(other => {\r\n            const otherPanel = other.querySelector('.acc-panel');\r\n            if (other !== item) close(otherPanel, other);\r\n        });\r\n\r\n        if (!isOpen) {\r\n            open(panel, item);\r\n        } else {\r\n            close(panel, item);\r\n        }\r\n    });\r\n\r\n    document.querySelectorAll('.acc-item.is-open .acc-panel').forEach(p => p.style.height = 'auto');\r\n\r\n\r\n/*Reviews read more*/\r\n    const blocks = document.querySelectorAll('.reviews__list-text[data-words]');\r\n\r\n    blocks.forEach(block => {\r\n        const wordsLimit = parseInt(block.dataset.words, 10);\r\n        if (!wordsLimit) return;\r\n\r\n        const p = block.querySelector('p');\r\n        if (!p) return;\r\n\r\n        const fullText = (p.textContent || '').trim();\r\n        const words = fullText.split(/\\s+/);\r\n        if (words.length <= wordsLimit) return;\r\n\r\n        const shortText = words.slice(0, wordsLimit).join(' ') + '‚Ä¶';\r\n\r\n        // wrap text only (button will be outside)\r\n        const inner = document.createElement('div');\r\n        inner.className = 'reviews__list-text-inner';\r\n        block.insertBefore(inner, p);\r\n        inner.appendChild(p);\r\n\r\n        // button\r\n        const btn = document.createElement('button');\r\n        btn.type = 'button';\r\n        btn.className = 'reviews__read-more';\r\n        block.appendChild(btn);\r\n\r\n        let isOpen = false;\r\n\r\n        const setBtn = () => (btn.textContent = isOpen ? 'Read less' : 'Read more');\r\n\r\n        const setMaxHeightToContent = () => {\r\n            // —Å—Ç–∞–≤–∏–º–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –≤–∏—Å–æ—Ç—É, —â–æ–± –±—É–≤ slide\r\n            inner.style.maxHeight = inner.scrollHeight + 'px';\r\n        };\r\n\r\n        const setClosedHeight = () => {\r\n            // –≤–∞–∂–ª–∏–≤–æ: –∑–∞–º—ñ—Ä –≤–∏—Å–æ—Ç–∏ –∑ –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º\r\n            inner.style.maxHeight = inner.scrollHeight + 'px';\r\n        };\r\n\r\n        const open = () => {\r\n            // 1) —Å—Ç–∞–≤–∏–º–æ –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç\r\n            p.textContent = fullText;\r\n\r\n            // 2) —Å–∫–∏–¥–∞—î–º–æ max-height –Ω–∞ 0 —ñ –æ–¥—Ä–∞–∑—É —Å—Ç–∞–≤–∏–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—É (–¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ transition)\r\n            inner.style.maxHeight = '0px';\r\n            inner.getBoundingClientRect(); // force reflow\r\n            setMaxHeightToContent();\r\n        };\r\n\r\n        const close = () => {\r\n            // 1) —Ñ—ñ–∫—Å—É—î–º–æ –ø–æ—Ç–æ—á–Ω—É –≤–∏—Å–æ—Ç—É (–∑ fullText)\r\n            inner.style.maxHeight = inner.scrollHeight + 'px';\r\n            inner.getBoundingClientRect(); // force reflow\r\n\r\n            // 2) —Å—Ç–∞–≤–∏–º–æ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç\r\n            p.textContent = shortText;\r\n\r\n            // 3) —Å—Ç–∞–≤–∏–º–æ max-height –ø—ñ–¥ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç\r\n            setClosedHeight();\r\n        };\r\n\r\n        // –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–∂–Ω–∞ \"–≤—ñ–¥–ø—É—Å—Ç–∏—Ç–∏\" max-height, —â–æ–± –Ω–µ —Ä—ñ–∑–∞–ª–æ –ø—Ä–∏ responsive\r\n        inner.addEventListener('transitionend', (e) => {\r\n            if (e.propertyName !== 'max-height') return;\r\n            if (isOpen) {\r\n                inner.style.maxHeight = 'none';\r\n            }\r\n        });\r\n\r\n        btn.addEventListener('click', () => {\r\n            isOpen = !isOpen;\r\n            setBtn();\r\n\r\n            if (isOpen) open();\r\n            else {\r\n                // —è–∫—â–æ –±—É–ª–æ none ‚Äî —Ç—Ä–µ–±–∞ –∑–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥ –∞–Ω—ñ–º–∞—Ü—ñ—î—é\r\n                if (inner.style.maxHeight === 'none') {\r\n                    inner.style.maxHeight = inner.scrollHeight + 'px';\r\n                    inner.getBoundingClientRect();\r\n                }\r\n                close();\r\n            }\r\n        });\r\n\r\n        // init (closed)\r\n        p.textContent = shortText;\r\n        setBtn();\r\n        // –≤–∏—Å—Ç–∞–≤–ª—è—î–º–æ —Å—Ç–∞—Ä—Ç–æ–≤—É –≤–∏—Å–æ—Ç—É –ø—ñ–¥ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç\r\n        inner.style.maxHeight = inner.scrollHeight + 'px';\r\n\r\n        // optional: –Ω–∞ —Ä–µ—Å–∞–π–∑—ñ –∫–æ—Ä–∏–≥—É–≤–∞—Ç–∏, —è–∫—â–æ –∑–∞–∫—Ä–∏—Ç–æ\r\n        const ro = new ResizeObserver(() => {\r\n            if (isOpen) return;\r\n            inner.style.maxHeight = inner.scrollHeight + 'px';\r\n        });\r\n        ro.observe(block);\r\n    });\r\n\r\n    const annotationRoot = document.querySelector('.reviews__annotation[data-words]');\r\n    if (!annotationRoot) return;\r\n\r\n/*Reviews annotation read more*/\r\n    const annotationLimit = parseInt(annotationRoot.dataset.words, 10);\r\n    if (!annotationLimit) return;\r\n\r\n    // –ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç (—É—Å—ñ <p>)\r\n    const annotationFullHTML = annotationRoot.innerHTML;\r\n    const annotationFullText = annotationRoot.textContent\r\n        .trim()\r\n        .replace(/\\s+/g, ' ');\r\n\r\n    const annotationWords = annotationFullText.split(' ');\r\n    if (annotationWords.length <= annotationLimit) return;\r\n\r\n    const annotationShortText =\r\n        annotationWords.slice(0, annotationLimit).join(' ') + '‚Ä¶';\r\n\r\n    // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, —è–∫–∏–π –∞–Ω—ñ–º—É—î–º–æ\r\n    const annotationInner = document.createElement('div');\r\n    annotationInner.className = 'reviews__annotation-inner';\r\n    annotationInner.innerHTML = `<p>${annotationShortText}</p>`;\r\n\r\n    // –ö–Ω–æ–ø–∫–∞\r\n    const annotationToggle = document.createElement('button');\r\n    annotationToggle.type = 'button';\r\n    annotationToggle.className = 'reviews__annotation-toggle';\r\n\r\n    let annotationIsOpen = false;\r\n\r\n    const annotationSetButton = () => {\r\n        annotationToggle.textContent = annotationIsOpen\r\n            ? 'Show less'\r\n            : 'Learn more';\r\n    };\r\n\r\n    const annotationSetMaxHeight = () => {\r\n        annotationInner.style.maxHeight =\r\n            annotationInner.scrollHeight + 'px';\r\n    };\r\n\r\n    const annotationOpen = () => {\r\n        annotationInner.innerHTML = annotationFullHTML;\r\n\r\n        annotationInner.style.maxHeight = '0px';\r\n        annotationInner.getBoundingClientRect(); // reflow\r\n        annotationSetMaxHeight();\r\n    };\r\n\r\n    const annotationClose = () => {\r\n        if (annotationInner.style.maxHeight === 'none') {\r\n            annotationInner.style.maxHeight =\r\n                annotationInner.scrollHeight + 'px';\r\n            annotationInner.getBoundingClientRect();\r\n        }\r\n\r\n        annotationInner.innerHTML = `<p>${annotationShortText}</p>`;\r\n        annotationSetMaxHeight();\r\n    };\r\n\r\n    annotationInner.addEventListener('transitionend', (e) => {\r\n        if (e.propertyName !== 'max-height') return;\r\n        if (annotationIsOpen) {\r\n            annotationInner.style.maxHeight = 'none';\r\n        }\r\n    });\r\n\r\n    annotationToggle.addEventListener('click', () => {\r\n        annotationIsOpen = !annotationIsOpen;\r\n        annotationSetButton();\r\n        annotationIsOpen ? annotationOpen() : annotationClose();\r\n    });\r\n\r\n    // –ú–æ–Ω—Ç–∞–∂\r\n    annotationRoot.innerHTML = '';\r\n    annotationRoot.appendChild(annotationInner);\r\n    annotationRoot.appendChild(annotationToggle);\r\n\r\n    // Init\r\n    annotationSetButton();\r\n    annotationSetMaxHeight();\r\n\r\n    // Resize safety\r\n    const annotationRO = new ResizeObserver(() => {\r\n        if (!annotationIsOpen) {\r\n            annotationSetMaxHeight();\r\n        }\r\n    });\r\n    annotationRO.observe(annotationRoot);\r\n\r\n/*Health optimization scroll*/\r\n    const hoViewport = document.querySelector('.health-optimization__list');\r\n    if (!hoViewport) return;\r\n\r\n    const hoTrack = hoViewport.querySelector('.health-optimization__track');\r\n    if (!hoTrack) return;\r\n\r\n    const hoMOBILE_BP = 1023;\r\n\r\n// position\r\n    let hoX = 0;\r\n    let hoDir = 1;            // 1 ‚Üí forward, -1 ‚Üí back (mobile)\r\n    let hoRafId = null;       // mobile RAF\r\n    let hoMode = null;        // 'mobile' | 'desktop'\r\n\r\n// smooth wheel (desktop)\r\n    let hoTargetX = 0;\r\n    let hoEaseRafId = null;\r\n    const hoEASE = 0.12;      // 0.08..0.18 (bigger = faster)\r\n    const ho_WHEEL_SENS = 0.9; // wheel sensitivity\r\n\r\n    const hoIsMobile = () => window.innerWidth <= hoMOBILE_BP;\r\n\r\n    const hoMaxScroll = () => {\r\n        const vw = hoViewport.clientWidth;\r\n        const tw = hoTrack.scrollWidth;\r\n        return Math.max(0, tw - vw);\r\n    };\r\n\r\n    const hoClamp = (val, min, max) => Math.max(min, Math.min(val, max));\r\n\r\n    const hoSetX = (val) => {\r\n        hoX = val;\r\n        hoTrack.style.transform = `translate3d(${-hoX}px, 0, 0)`;\r\n    };\r\n\r\n    /* ===== MOBILE: pendulum auto scroll ===== */\r\n    const hoStartAuto = () => {\r\n        hoStopAuto();\r\n\r\n        const hoSpeed = 0.35; // üëà speed\r\n\r\n        const hoTick = () => {\r\n            const max = hoMaxScroll();\r\n            if (max <= 0) {\r\n                hoRafId = requestAnimationFrame(hoTick);\r\n                return;\r\n            }\r\n\r\n            hoX += hoSpeed * hoDir;\r\n\r\n            if (hoX >= max) {\r\n                hoX = max;\r\n                hoDir = -1;\r\n            } else if (hoX <= 0) {\r\n                hoX = 0;\r\n                hoDir = 1;\r\n            }\r\n\r\n            hoSetX(hoX);\r\n            hoRafId = requestAnimationFrame(hoTick);\r\n        };\r\n\r\n        hoRafId = requestAnimationFrame(hoTick);\r\n    };\r\n\r\n    const hoStopAuto = () => {\r\n        if (hoRafId) cancelAnimationFrame(hoRafId);\r\n        hoRafId = null;\r\n    };\r\n\r\n    /* ===== DESKTOP: wheel scroll (smooth inertia) ===== */\r\n    let hoPointerX = null;\r\n    let hoPointerY = null;\r\n\r\n    window.addEventListener(\r\n        'mousemove',\r\n        (ev) => {\r\n            hoPointerX = ev.clientX;\r\n            hoPointerY = ev.clientY;\r\n        },\r\n        { passive: true }\r\n    );\r\n\r\n    const hoIsPointerOverViewport = () => {\r\n        if (hoPointerX === null || hoPointerY === null) return false;\r\n        const el = document.elementFromPoint(hoPointerX, hoPointerY);\r\n        return !!el && hoViewport.contains(el);\r\n    };\r\n\r\n    const hoStopEase = () => {\r\n        if (hoEaseRafId) cancelAnimationFrame(hoEaseRafId);\r\n        hoEaseRafId = null;\r\n    };\r\n\r\n    const hoStartEase = () => {\r\n        if (hoEaseRafId) return;\r\n\r\n        const step = () => {\r\n            const max = hoMaxScroll();\r\n\r\n            hoTargetX = hoClamp(hoTargetX, 0, max);\r\n\r\n            const diff = hoTargetX - hoX;\r\n\r\n            if (Math.abs(diff) < 0.25) {\r\n                hoSetX(hoTargetX);\r\n                hoEaseRafId = null;\r\n                return;\r\n            }\r\n\r\n            hoSetX(hoX + diff * hoEASE);\r\n            hoEaseRafId = requestAnimationFrame(step);\r\n        };\r\n\r\n        hoEaseRafId = requestAnimationFrame(step);\r\n    };\r\n\r\n    const hoOnWheel = (e) => {\r\n        if (hoMode !== 'desktop') return;\r\n\r\n        // ‚úÖ only when pointer is really over the section (no hover bug)\r\n        if (!hoIsPointerOverViewport()) return;\r\n\r\n        const max = hoMaxScroll();\r\n        if (max <= 0) return;\r\n\r\n        const delta = e.deltaY;\r\n\r\n        // if already at edges and trying to go further ‚Üí let page scroll\r\n        const atStart = hoTargetX <= 0 && delta < 0;\r\n        const atEnd = hoTargetX >= max && delta > 0;\r\n        if (atStart || atEnd) return;\r\n\r\n        e.preventDefault();\r\n\r\n        hoTargetX += delta * ho_WHEEL_SENS;\r\n        hoTargetX = hoClamp(hoTargetX, 0, max);\r\n\r\n        hoStartEase();\r\n    };\r\n\r\n    /* ===== MODE SWITCH ===== */\r\n    const hoApplyMode = () => {\r\n        const nextMode = hoIsMobile() ? 'mobile' : 'desktop';\r\n        if (nextMode === hoMode) return;\r\n\r\n        hoMode = nextMode;\r\n\r\n        // stop everything\r\n        hoStopAuto();\r\n        hoStopEase();\r\n\r\n        // reset position\r\n        const max = hoMaxScroll();\r\n        hoX = 0;\r\n        hoTargetX = 0;\r\n        hoDir = 1;\r\n        hoSetX(0);\r\n\r\n        if (hoMode === 'mobile') {\r\n            window.removeEventListener('wheel', hoOnWheel);\r\n            hoStartAuto();\r\n        } else {\r\n            window.addEventListener('wheel', hoOnWheel, { passive: false });\r\n            // ensure clamped on desktop\r\n            hoSetX(hoClamp(hoX, 0, max));\r\n        }\r\n    };\r\n\r\n    hoApplyMode();\r\n\r\n    window.addEventListener('resize', () => {\r\n        hoApplyMode();\r\n\r\n        // clamp current values after resize\r\n        const max = hoMaxScroll();\r\n        hoX = hoClamp(hoX, 0, max);\r\n        hoTargetX = hoClamp(hoTargetX, 0, max);\r\n        hoSetX(hoX);\r\n    });\r\n});\r\n\r\ndocument.querySelectorAll('.reviews__annotation[data-words]').length\r\n"]}